(function(){var e,t,r,n,i,s,a,o,l,_,u,c,d,p,f,h,g,m,v,y,E,x,N,O,b,A,R,k=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},S=[].slice;null==Array.prototype.unique&&(Array.prototype.unique=function(){var e,t,r,n;for(n=[],t=0,r=this.length;r>t;t++)e=this[t],k.call(n,e)<0&&n.push(e);return n}),null==$.fn.attrAll&&($.fn.attrAll=function(e,t,r){var n;return null==t&&(t=" "),null==r&&(r=!0),n=[],this.each(function(t,r){return n.push($(r).attr(e)),!0}),r&&(n=n.unique()),n.join(t)}),v=function(e){var t,r;return t=function(e,n){var i,s,a,o,l;for(null==n&&(n=[]),l=[],s=a=0,o=e.length;o>=0?o>a:a>o;s=o>=0?++a:--a)i=e.splice(s,1),0===e.length&&r.push(n.concat(i)),t(e.slice(),n.concat(i)),l.push(e.splice(s,0,i[0]));return l},r=[],t(e),r},y=function(e,t){var r,n,i,s,a,o,l;for(l=[],s=e.length,a=function(){var e,n,i;for(i=[],r=e=0,n=t;n>=0?n>e:e>n;r=n>=0?++e:--e)i.push(r);return i}();;){if(l.push(function(){var t,r,i;for(i=[],t=0,r=a.length;r>t;t++)n=a[t],i.push(e[n]);return i}()),a[0]===s-t)break;for(r=t-1;r>=0&&a[r]+t-r===s;)r--;for(o=a[r],a[r]++,i=2,r++;t>r;)a[r]=o+i,r++,i++}return l},E=function(e,t){var r,n,i,s,a;for(n={},s=0,a=e.length;a>s;s++)r=e[s],null==(i="function"==typeof t?t(r):void 0)&&(i=r),null==n[i]&&(n[i]=[]),n[i].push(r);return n},n={NORMAL:"NORMAL",SIMPLE:"SIMPLE"},n.DEFAULT=n.NORMAL,i={BELOW:"BELOW",TOOLTIP:"TOOLTIP",POPOVER:"POPOVER",NONE:"NONE"},i.DEFAULT=i.NONE,l={DEPENDENCIES:"DEPENDENCIES",VALUE:"VALUE",CONSTRAINTS:"CONSTRAINTS"},_={DEPENDENCIES:"DEPENDENCY",VALUE:"VALUE",CONSTRAINTS:"CONSTRAINT"},e={ENUMERATE:"ENUMERATE",SENTENCE:"SENTENCE",LIST:"LIST"},e.DEFAULT=e.ENUMERATE,r={PHASE_ORDER:[l.DEPENDENCIES,l.VALUE,l.CONSTRAINTS],BUILD_MODE:e.DEFAULT},o=["depends_on","name","preprocess","required","type"],a=["dependency_mode","error_classes","dependency_error_classes","error_targets","group","output_preprocessed","postprocess","constraints","errors","valid_constraints","valid_dependencies","valid_value","value"],t={PREPROCESS:!0,POSTPROCESS:!1,REQUIRED:!0,OUTPUT_PREPROCESSED:!0,DEPENDENCY_MODE:"all",ERROR_TARGETS:"",INCLUDE_MAX:"true",INCLUDE_MIN:"true"},R={_number:function(e,t,r,n,i,s){var a;if(null==i&&(i=!0),null==s&&(s=!0),e=e.replace(/\s/g,""),"+"===e[0]&&(e=e.slice(1)),"."===e[0]?e="0"+e:"-"===e[0]&&"."===e[1]&&(e="-0."+e.slice(2)),e.indexOf(".")>=0){for(;"0"===e[e.length-1];)e=e.slice(0,-1);"."===e[e.length-1]&&(e=e.slice(0,-1))}return a=parseFloat(e),isNaN(a)||!isFinite(a)||e!==""+a?{error_message_type:"number",_number:a,_string:e}:{valid:!0,_number:a,_string:e}},_text:function(e,t,r,n){return e.length>0},email:function(e,t){var r;return e.indexOf("@")<0?{error_message_type:"email_at"}:(r=e.split("@"),r.length>2?{error_message_type:"email_many_at"}:2===r.length&&""!==r[0]&&""!==r[1]?e.indexOf(".",e.indexOf("@"))<0||"."===e[e.length-1]?{error_message_type:"email_dot"}:!0:{error_message_type:"email"})},integer:function(e,t,r,n,i,s){var a,o;return o=this._number(e,t,r,n,i,s),o.valid===!0?o._number===Math.floor(o._number)?!0:{error_message_type:"integer_float"}:(e=o._string,a=Math.floor(o._number),isNaN(a)||!isFinite(a)||e!==""+a?{error_message_type:"integer"}:(o.error_message_type=o.error_message_type.replace("number_","integer_"),o))},number:function(e,t,r,n,i,s){var a;return a=this._number(e,t,r,n,i,s),a.valid===!0?!0:a},phone:function(e,t){for(e=e.replace(/[\s+\+\-\/\(\)]/g,"");"0"===e[0];)e=e.slice(1);return e!==""+parseInt(e,10)?{error_message_type:"phone"}:!0},text:function(e,t,r,n){return e.length>0},radio:function(e,t){return $("[name='"+t.attr("name")+"']:checked").length>0},checkbox:function(e,t){return t.prop("checked")===!0},select:function(e,t){return this.text(t.val())}},f={blacklist:function(e,t){var r,n,i;for(n=0,i=e.length;i>n;n++)if(r=e[n],t.indexOf(r)>=0)return!1;return!0},max:function(e,t,r){return"false"===(null!=r?r.include_max:void 0)?t>e:t>=e},max_length:function(e,t){return e.length<=t},min:function(e,t,r){return"false"===(null!=r?r.include_min:void 0)?e>t:e>=t},min_length:function(e,t){return e.length>=t},regex:function(e,t,r){return new RegExp(t,r.flags).test(e)},whitelist:function(e,t){var r,n,i;for(n=0,i=t.length;i>n;n++)if(r=t[n],e.indexOf(r)<0)return!1;return!0}},d={max:["include_max"],max_length:["enforce_max_length"],min:["include_min"],min_length:["enforce_min_length"],regex:["regex_flags"]},c=[],p={include_max:!0,include_min:!0},x=function(e,t){return null!=t&&""+p[e]==""+t},O={de:{and:"und",gt:"größer als",gte:"größer als oder gleich",lt:"kleiner als",lte:"kleiner als oder gleich"},en:{and:"and",gt:"greater than",gte:"greater than or equal to",lt:"less than",lte:"less than or equal to"}},$.extend(O.de,{dependency_general:"Dieses Feld kann erst dann korrekt ausgefüllt werden, wenn seine Abhängigkeiten korrekt ausgefüllt wurden",dependency_prefix:"Die Felder",dependency_suffix:"sind noch ungültig",value_email:"'{{value}}' ist keine gültige E-Mail-Adresse",value_email_at:"Eine E-Mail-Adresse muss ein @-Zeichen enthalten",value_email_many_at:"Eine E-Mail-Adresse darf höchstens ein @-Zeichen enthalten",value_email_dot:"'{{value}}' muss eine korrekte Endung haben (z.B. '.de')",value_integer:"'{{value}}' muss eine Zahl sein",value_integer_float:"'{{value}}' muss eine ganze Zahl sein",value_number:"'{{value}}' muss eine Zahl sein",value_phone:"'{{value}}' darf nur aus Zahlen, Leerzeichen und den Zeichen '+-/()' bestehen",value_radio:"Eins der Optionsfelder muss ausgewählt werden",value_checkbox:"Das Kontrollkästchen muss ausgewählt werden",value_select:"Es muss eine andere Option der Auswahlbox ausgewählt werden",value_text:"Das Textfeld muss ausgefüllt werden",constraint_enumerate_prefix:"'{{value}}'",constraint_list_prefix:"'{{value}}'",constraint_blacklist_prefix:"darf",constraint_blacklist:"keines der Zeichen '{{blacklist}}'",constraint_blacklist_suffix:"enthalten",constraint_whitelist_prefix:"muss",constraint_whitelist:"jedes der Zeichen '{{whitelist}}'",constraint_whitelist_suffix:"enthalten",constraint_max_prefix:"darf",constraint_max:"nicht größer als oder gleich {{max}}",constraint_max_suffix:"sein",constraint_max_include_max_prefix:"darf",constraint_max_include_max:"nicht größer als {{max}}",constraint_max_include_max_suffix:"sein",constraint_max_length_prefix:"darf",constraint_max_length:"nicht länger als {{max_length}} Zeichen",constraint_max_length_suffix:"sein",constraint_min_prefix:"darf",constraint_min:"nicht kleiner als oder gleich {{min}}",constraint_min_suffix:"sein",constraint_min_include_min_prefix:"darf",constraint_min_include_min:"nicht kleiner als {{min}}",constraint_min_include_min_suffix:"sein",constraint_min_length_prefix:"darf",constraint_min_length:"nicht kürzer als {{min_length}} Zeichen",constraint_min_length_suffix:"sein",constraint_regex_prefix:"muss",constraint_regex:"dem regulären Ausdruck '{{regex}}'",constraint_regex_suffix:"entsprechen"}),$.extend(O.en,{dependency_general:"This field can only be filled in after filling in its required fields",dependency_prefix:"The fields",dependency_suffix:"are still invalid",value_email:"'{{value}}' is no valid e-mail address",value_email_at:"An e-mail address must contain the @ symbol",value_email_many_at:"An e-mail address must contain only one @ symbol",value_email_dot:"'{{value}}' hat keine korrekte Endung (z.B. '.de')",value_integer:"'{{value}}' is no valid integer",value_integer_float:"'{{value}}' ist keine ganze Zahl",value_number:"'{{value}}' is no valid number",value_phone:"'{{value}}' is no valid phone number",value_radio:"Die {{index_of_type}}. Auswahlbox wurde nicht ausgewählt",value_checkbox:"Die {{index_of_type}}. Checkbox wurde nicht ausgewählt",value_select:"Das {{index_of_type}}. Auswahlmenü wurde nicht ausgewählt",value_text:"Please fill in this text field",constraint_enumerate_prefix:"'{{value}}'",constraint_list_prefix:"'{{value}}'",constraint_blacklist:"enthält ein Zeichen in '{{blacklist}}'",constraint_max:"ist nicht kleiner als {{max}}",constraint_max_include_max:"ist nicht kleiner als oder gleich {{max}}",constraint_max_length:"ist länger als {{max_length}} Zeichen",constraint_min:"ist nicht größer als {{min}}",constraint_min_include_min:"ist nicht größer als oder gleich {{min}}",constraint_min_length:"ist kürzer als {{min_length}} Zeichen",constraint_regex:"entspricht nicht dem regulären Ausdruck '{{regex}}'"}),N={de:{},en:{}},u={},u[e.ENUMERATE]=function(e,t,r,n){var i,s,a,o,l,_,u,c,d,p,f;if(e.length>1){s=O[t],o=[],u=E(e,function(e){return e.suffix});for(p in u){f=u[p],_=E(f,function(e){return e.prefix});for(c in _)d=_[c],i=d[0],i.message=i.prefix+" "+i.message;a=f[f.length-1],a.message=a.message+" "+a.suffix,o=o.concat(f)}return e=o,(function(){var t,r,n,i;for(n=e.slice(0,-1),i=[],t=0,r=n.length;r>t;t++)l=n[t],i.push(l.message);return i}().join(", ")+" "+s.and+" "+e[e.length-1].message).replace(/\s+/g," ")}return(e[0].prefix+" "+e[0].message+" "+e[0].suffix).replace(/\s+/g," ")},u[e.SENTENCE]=function(e,t,r){var n;return function(){var t,r,i;for(i=[],t=0,r=e.length;r>t;t++)n=e[t],i.push(""+n.message[0].toUpperCase()+n.message.slice(1));return i}().join(". ").replace(/\s+/g," ")},u[e.LIST]=function(e,t,r){return"<ul><li>"+e.join("</li><li>")+"</li></ul>"},h=function(e,t,r,n,i,s,a,o,l){var _,c;return null==o&&(o=" "),null==l&&(l=" "),s=s||O[n][e+"_prefix"]||"",a=a||O[n][e+"_suffix"]||"",c=i instanceof Array?("function"==typeof(_=N[n])[r]?_[r](i,n,t,r):void 0)||u[r](i,n,t,r):i,s&&(s instanceof Function&&(s=s()),c=s+o+c),a&&(c+=l+a),c},b=function(){var e,t,r,n;if(t=arguments[0],n=2<=arguments.length?S.call(arguments,1):[],n=1===n.length?n[0]:$.extend.apply($,n),"string"==typeof t){for(e in n)r=n[e],t.indexOf("{{"+e+"}}")>=0&&(t=t.replace("{{"+e+"}}",r));return t}return t instanceof Function?t(n):""},g={},g[l.DEPENDENCIES]=function(t,r,n,i){var s,a,o,l;return o=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)s=t[e],null!=s.name&&n.push(s.name);return n}(),o.length===t.length?(n===e.SENTENCE&&(n=e.ENUMERATE),l=function(){var e,t,r;for(r=[],e=0,t=o.length;t>e;e++)a=o[e],r.push({message:"'"+a+"'",prefix:"",suffix:""});return r}(),h(_[r].toLowerCase(),r,n,i,l)):O[i][_[r].toLowerCase()+"_general"]},g[l.VALUE]=function(t,r,n,i){var s,a,o;return s=t[0],a=_[r].toLowerCase()+"_"+(s.error_message_type||s.type),o={message:b(O[i][a],s),prefix:"",suffix:""},h(a,r,e.ENUMERATE,i,[o])},g[l.CONSTRAINTS]=function(e,t,r,n){var i,s,a,o,l,u,d,p,f,g,v,y,E,N,A,R,D,T,w,C,L,I,U,P,$,q,M,F;for(C=[],u=[],M=[],v=0,y=e.length;y>v;v++){for(a=e[v],o=!1,d=D=0,E=c.length;E>D;d=++D)l=c[d],P=a.type,k.call(l,P)>=0&&(o=!0,null!=u[d]?u[d].push(a):u[d]=[a]);o||M.push(a)}for(T=0,N=M.length;N>T;T++)a=M[T],u.push([a]);for(L=_[t].toLowerCase(),f=L+"_",i=O[n][(t+"_"+r+"_prefix").toLowerCase()]||"",s=O[n][(t+"_"+r+"_suffix").toLowerCase()]||"",U=0,A=u.length;A>U;U++)if(e=u[U],null!=e){for(g=[],q=0,R=e.length;R>q;q++)if(a=e[q],g.push(a.type),null!=a.options){$=a.options;for(w in $)F=$[w],x(w,F)&&g.push(w)}p=m(g,n,f),null!=p&&C.push({message:b.apply(null,[O[n][p]].concat(S.call(e))),prefix:b(O[n][p+"_prefix"],a)||i,suffix:b(O[n][p+"_suffix"],a)||s})}return p=L+"_"+r.toLowerCase(),I=b(""+O[n][p+"_prefix"],e[0]),h(p,t,r,n,C,I)},A={},m=function(e,t,r,n){var i,s,a,o,l,_,u,c,d,p,f,h,g;if(null==r&&(r=""),null==n&&(n=""),e=e.slice(0),e.sort(),i=e.join("_"),null!=A[i])return A[i];for(s=o=p=e.length;o>0;s=o+=-1)for(f=y(e,s),u=0,l=f.length;l>u;u++)for(g=f[u],h=v(g),c=0,_=h.length;_>c;c++)if(d=h[c],a=r+d.join("_")+n,null!=O[t][a])return A[i]=a,a;return null},s=function(){function e(e,t){this.form_validator=e,null!=i[t.error_output_mode]||t.error_output_mode instanceof Function?this.error_output_mode=t.error_output_mode:this.error_output_mode=i.DEFAULT}return e.prototype._apply_error_classes=function(e,t,r,n){var i,s,a,o,l;if(null!=t){for(l=this.form_validator._find_targets(t,e),i=s=0,a=l.length;a>s;i=++s)o=l[i],o instanceof jQuery||(o=l.eq(i)),n===!1?o.addClass(r):o.removeClass(r);return l}return[]},e.prototype._set_message_below=function(e,t,r){var n;return null==(n=t.data("_fv_error_container"))&&("radio"===r.type&&(t=$("input[name='"+t.attr("name")+"']").last()),0===(n=t.next(".fv-error-message")).length&&(n=$('<div class="fv-error-message" />'),t.after(n)),t.data("_fv_error_container",n)),n.html(e),this},e.prototype._set_message_tooltip=function(e,t,r){return null==t.data("_fv_tooltip")&&t.tooltip({html:!0,placement:t.attr("data-placement")||"top",title:function(){return $(this).data("_fv_tooltip")}}),t.data("_fv_tooltip",e).tooltip("hide"),this},e.prototype._set_message_popover=function(e,t,r){return"checkbox"===r.type||"radio"===r.type||"select"===r.type?(t.attr("title",e),this):(null==t.data("_fv_popover")&&t.popover({html:!0,placement:t.attr("data-placement")||"right",content:function(){return $(this).data("_fv_popover")},trigger:"manual"}).focus(function(){return t.popover("show"),!1}).blur(function(){return t.popover("hide"),!0}).click(function(){return document.activeElement===this&&t.popover("toggle"),!0}),t.data("_fv_popover",e).popover("hide"),this)},e.prototype._process_error_message=function(e,t,r){var n,s;return this.error_output_mode===i.NONE?this:(this.error_output_mode instanceof Function?(s=this.error_output_mode(t,r,e),s.html(e)):(n=this.error_output_mode.toLowerCase(),this["_set_message_"+n](e,t,r)),this)},e.prototype.modify=function(e,t){var r,n,i,s,a,o,_,u,c,d,p,f,h,g,m,v,y,E,x;for(_=this.form_validator,o=_.fields.all,a=_.error_output_mode,c=p=0,y=o.length;y>=0?y>p:p>y;c=y>=0?++p:--p){for(n=o.eq(c),r=_._get_element_data(n),u=null,g=0,f=e.length;f>g;g++)if(i=e[g],i.element.is(n)){u=i;break}if(null==u)d=!0,x=!0,m="";else{for(d=!1,x=!0,E=u.errors,v=0,h=E.length;h>v;v++)if(s=E[v],s.phase===l.DEPENDENCIES){x=!1;break}m=u.message}t.apply_error_classes===!0&&(this._apply_error_classes(n,r.error_targets,r.error_classes||_.error_classes,d),this._apply_error_classes(n,r.depends_on,r.dependency_error_classes||_.dependency_error_classes,x)),this._process_error_message(m,n,r)}return this},e}(),window.FormValidator=function(){function _(t,r){var n;null==r&&(r={}),n=this.constructor,this.form=t,this.fields=null,this.form_modifier=new s(this,r),this.error_classes=r.error_classes||this.form.attr("data-fv-error-classes")||"",this.dependency_error_classes=r.dependency_error_classes||this.form.attr("data-fv-dependency-error-classes")||"",this.validators=$.extend({},n.validators,r.validators),this.validation_options=r.validation_options||null,this.constraint_validators=$.extend({},n.constraint_validators,r.constraint_validators),this.build_mode=r.build_mode||e.DEFAULT,this.error_mode=null!=n.ERROR_MODES[r.error_mode]?r.error_mode:n.ERROR_MODES.DEFAULT,this.locale=r.locale||"en",this.error_target_getter=r.error_target_getter||null,this.field_getter=r.field_getter||null,this.required_field_getter=r.required_field_getter||null,this.create_dependency_error_message=r.create_dependency_error_message||null,this.preprocessors=$.extend(n.default_preprocessors,r.preprocessors||{}),this.postprocessors=r.postprocessors||{},this.group=r.group||null}return _.ERROR_MODES=n,_.ERROR_OUTPUT_MODES=i,_.VALIDATION_PHASES=l,_.BUILD_MODES=e,_.ERROR_MESSAGE_CONFIG=r,_.constraint_validators=f,_.constraint_validator_options=d,_.constraint_validator_groups=c,_.validators=R,_.locales=O,_.error_message_builders=g,_.default_preprocessors={number:function(e,t,r){return"de"===r?e.replace(/\,/g,"."):e},integer:function(e,t,r){return"de"===r?e.replace(/\,/g,"."):e}},_._build_error_message=function(e,t,r,n){return this.error_message_builders[e](t,e,r,n)},_.get_error_message_for_element=function(e,t,r,n,i){var s,a,o,_,u,c,d;null==i&&(i=" "),a=[],o={};for(c in l)o[c]=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)s=t[e],s.phase===c&&n.push(s);return n}();for(d=this.ERROR_MESSAGE_CONFIG.PHASE_ORDER,_=0,u=d.length;u>_;_++)c=d[_],o[c].length>0&&a.push(this._build_error_message(c,o[c],r,n));return a.join(i)},$(document).on("click","[data-fv-start]",function(){var e,t,r,n,i,s;if(e=$(this),null==(t=e.data("_form_validator_container"))&&(t=e.closest(e.attr("data-fv-start")),0===t.length&&(t=$(e.attr("data-fv-start"))),e.data("_form_validator_container",t)),null==(i=t.data("_form_validator"))){if(s=e.attr("data-fv-start-options"),null!=s)try{s=JSON.parse(s)}catch(n){r=n,s=window[s]()}i=_["new"](t,s),t.data("_form_validator",i)}return i.validate(),!1}),$(document).on("change click keyup","[data-fv-real-time] [data-fv-validate]",function(e){var t,r,n,i;return t=$(this),"click"!==e.type&&"change"!==e.type||t.filter("textarea, input[type='text'], input[type='number'], input[type='date'], input[type='month'], input[type='week'], input[type='time'], input[type='datetime'], input[type='datetime-local'], input[type='email'], input[type='search'], input[type='url']").length!==t.length?(r=t.closest("[data-fv-real-time]"),1===r.length&&(null==(i=r.data("_form_validator"))&&(i=_["new"](r),r.data("_form_validator",i)),n=i.validate(),n.length>0&&t.focus()),!1):!0}),_["new"]=function(e,t){return new this(e,t)},_.prototype._get_attribute_value_for_key=function(e,r){var n,i,s,a,o,l,_,u;return o="data-fv-",_={type:"validate",required:"optional"},i=["preprocess","required"],n=null==_[r]?o+r.replace(/\_/g,"-"):o+_[r],u=e.attr(n),s=null!=u,s?u=u.trim():(l=a=r.toUpperCase(),k.call(Object.keys(t),l)>=0&&(u=t[a])),k.call(i,r)>=0&&(u="true"===u||u===!0),"required"===r&&s&&(u=!u),u},_.prototype._set_element_data=function(e,t){return $.data(e[0],"_fv",t),this},_.prototype._get_element_data=function(e){return $.data(e[0],"_fv")},_.prototype._cache_attribute=function(e,t,r,n){return null==n?n=e.attr("data-fv-"+r.replace(/\_/g,"-")):n instanceof Function&&(n=n.call(this)),t[r]=n,t},_.prototype._get_fields=function(e){return("function"==typeof this.field_getter?this.field_getter(e):void 0)||e.find("[data-fv-validate]").filter(function(e,t){return 0===$(t).closest("[data-fv-ignore-children]").length})},_.prototype._get_required=function(e){return("function"==typeof this.required_field_getter?this.required_field_getter(e):void 0)||e.not("[data-fv-optional='true']")},_.prototype._get_value_info=function(e,t){var r,n,i,s,a,o;return i=t.type,n=t.preprocess,s=!0,a=e.val(),null==a&&(s=!1,a=e.text()),r=a,o=r!==t.value,t.value=r,null!=this.preprocessors[i]&&n!==!1&&(a=this.preprocessors[i].call(this.preprocessors,a,e,this.locale)),{usedValFunc:s,value:a,original_value:r,value_has_changed:o}},_.prototype._find_targets=function(e,t,r){var n;return null==r&&(r=/\s+/g),"string"==typeof e?function(){var i,s,a,o;for(a=e.split(r),o=[],i=0,s=a.length;s>i;i++)n=a[i],o.push(this._find_target(n,t));return o}.call(this):e||[]},_.prototype._find_target=function(e,t){var r;return"self"===e?t:(r=this.form.find("[data-fv-name='"+e+"']"),0===r.length&&(r=t.closest(e)),0===r.length&&(r=this.form.find(e)),0===r.length&&(r=$(e)),r)},_.prototype._get_error_targets=function(e,r,n){return("function"==typeof this.error_target_getter?this.error_target_getter(e,r,n):void 0)||e.attr("data-fv-error-targets")||e.closest("[data-fv-error-targets]").attr("data-fv-error-targets")||t.ERROR_TARGETS},_.prototype._group=function(e){var t,r,n,i,s,a,o,l,_;for(r={},a=o=0,_=e.length;_>=0?_>o:o>_;a=_>=0?++o:--o)n=e.eq(a),t=this._get_element_data(n),null==t.group&&(t.group=n.attr("data-fv-group")||t.name,this._set_element_data(n,t)),s=t.group,null==r[s]?r[s]=[n]:r[s].push(n);return function(){var e;e=[];for(l in r)i=r[l],e.push(i);return e}()},_.prototype._group_errors=function(e,t){var r,n,i,s,a,o,l,_,u,c;for(r=this.constructor,c=[],a=this.fields.all,o=l=0,u=a.length;u>=0?u>l:l>u;o=u>=0?++l:--l)n=a.eq(o),i=function(){var t,r,i;for(i=[],r=0,t=e.length;t>r;r++)s=e[r],s.element.is(n)&&i.push(s);return i}(),i.length>0&&(_=t.messages===!0?r.get_error_message_for_element(n,i,this.build_mode,this.locale):"",c.push({element:n,errors:i,message:_}));return c},_.prototype._validate_element=function(e,t,r){var n,i,s,a;if(n=t.type,a=r.value,s=this.validators[n],null==s)throw new Error("FormValidator::_validate_element: No validator found for type '"+n+"'. Make sure the type is correct or define a validator!");return i=s.call(this.validators,a,e),i===!1?i={error_message_type:n}:"string"==typeof i&&(i={error_message_type:i}),i},_.prototype._validate_dependencies=function(e,r){var n,i,s,a,o,l,_,u,c;if(o=[],a=[],null!=r.depends_on)for(a=r.depends_on,l=_=0,u=a.length;u>_;l=++_)i=a[l],n=this._get_element_data(i),s=this._validate_element(i,n,this._get_value_info(i,n)),s!==!0&&o.push($.extend(s,{dependency_element:i,element:e,index:l,type:n.type,name:n.name}));return null==r.dependency_mode&&(r.dependency_mode=e.attr("data-fv-dependency-mode")||t.DEPENDENCY_MODE,this._set_element_data(e,r)),c="any"===r.dependency_mode?o.length<a.length:0===o.length,{dependency_errors:o,dependency_elements:a,valid_dependencies:c,dependency_mode:r.dependency_mode}},_.prototype._validate_constraints=function(e,r,n){var i,s,a,o,l,_,u,c,p,f,h,g,m,v,y;if(y={},null!=r.constraints)_=r.constraints;else{i=this.constructor,_=[],m=this.constraint_validators;for(a in m)if(o=m[a],null!=(l=e.attr("data-fv-"+a.replace(/\_/g,"-")))){if(null!=(d=i.constraint_validator_options[a]))for(g={},u=0,c=d.length;c>u;u++)h=d[u],g[h]=e.attr("data-fv-"+h.replace(/\_/g,"-"))||t[h.toUpperCase()];else g=null;_.push({name:a,options:g,validator:o,value:l})}r.constraints=_,this._set_element_data(e,r)}for(f=0,p=_.length;p>f;f++)s=_[f],s.validator.call(this.constraint_validators,n,s.value,s.options)===!0?y[s.name]=!0:(v={},v.options=s.options,v[s.name]=s.value,y[s.name]=v);return y},_.prototype.register_validator=function(e,t,r){return this.validators[e]=t,this},_.prototype.deregister_validator=function(e){return delete this.validators[e],this},_.prototype.register_preprocessor=function(e,t){return this.preprocessors[e]=t,this},_.prototype.deregister_preprocessor=function(e){return delete this.preprocessors,this},_.prototype.register_postprocessor=function(e,t){return this.postprocessors[e]=t,this},_.prototype.deregister_postprocessor=function(e){return delete this.postprocessors[e],this},_.prototype.cache=function(){var e,t,r,n,i,s,_,u,c,d,p;for(r=this._get_fields(this.form),this.fields={all:r,required:this._get_required(r)},n=s=0,p=r.length;p>=0?p>s:s>p;n=p>=0?++s:--s){for(t=r.eq(n),e={},c=0,_=o.length;_>c;c++)i=o[c],e[i]=this._get_attribute_value_for_key(t,i);for(e.depends_on=this._find_targets(e.depends_on,t,/^\s*\;\s*$/g),d=0,u=a.length;u>d;d++)i=a[d],e[i]=null;e.errors={},e.errors[l.DEPENDENCIES]=[],e.errors[l.VALUE]=[],e.errors[l.CONSTRAINTS]=[],this._set_element_data(t,e)}return this},_.prototype.validate=function(e){var t,r,n,i,s,a,o,_,u,c,d,p,f,h,g,m,v,y,E,x,N,O,b,A,R,k,S,D,T,w,C,L,I,U,P,q,M;for(null==e&&(e={}),s={all:!1,apply_error_classes:!0,focus_invalid:!0,messages:!0,stop_on_error:!0,recache:!1},e=$.extend(s,this.validation_options,e),null!=this.fields&&e.recache!==!0||this.cache(),t=this.constructor,c=[],N=null,L=!1,D=this.fields.required,d=this.fields.all,p=null,h=v=0,b=d.length;b>=0?b>v:v>b;h=b>=0?++v:--v)if(u=d.eq(h),i=this._get_element_data(u),g=i.required,C=i.type,y=i.name,M=this._get_value_info(u,i),P=M.value,E=M.original_value,q=M.value_has_changed,L=M.usedValFunc,e.all!==!1||g||0!==P.length&&"radio"!==C&&"checkbox"!==C){if(O=!0,x=l.DEPENDENCIES,A=this._validate_dependencies(u,i),o=A.dependency_errors,a=A.dependency_elements,_=A.dependency_mode,I=A.valid_dependencies,I?(i.valid_dependencies=!0,i.errors[x]=[]):(O=!1,i.valid_dependencies=!1,i.errors[x]=o.concat({element:u,required:g,type:"dependency",phase:x,mode:_}),null==p&&(p=u)),c=c.concat(i.errors[x]),x=l.VALUE,q?!O&&e.stop_on_error||(n=null,U=this._validate_element(u,i,M),U!==!0?(O=!1,i.valid_value=!1,n={element:u,error_message_type:U.error_message_type,phase:x,required:g,type:C,value:P},i.errors[x]=[n],null==p&&(p=u)):(i.valid_value=!0,i.errors[x]=[])):!O&&e.stop_on_error||i.valid_value!==!0&&(O=!1,null==p&&(p=u)),c=c.concat(i.errors[x]),x=l.CONSTRAINTS,q){if(O||!e.stop_on_error){i.valid_constraints=!0,w=[],R=this._validate_constraints(u,i,P);for(r in R)T=R[r],T!==!0&&(i.valid_constraints=!1,O=!1,w.push($.extend(T,{element:u,required:g,type:r,phase:x,value:P})));i.errors[x]=w,i.valid_constraints===!1&&null==p&&(p=u)}}else!O&&e.stop_on_error||i.valid_constraints!==!0&&(O=!1,null==p&&(p=u));c=c.concat(i.errors[x]),m=i.valid_dependencies&&i.valid_value&&i.valid_constraints,m?(i.valid===!0&&null!=i.postprocess&&null!=i.output_preprocessed||(i.valid=!0,this._cache_attribute(u,i,"postprocess"),this._cache_attribute(u,i,"output_preprocessed"),this._set_element_data(u,i)),i.postprocess===!0?(P=null!=(k=this.postprocessors[C])?k.call(this.postprocessors,P,u,this.locale):void 0,L?u.val(P):u.text(P),null!=n&&(n.value=P)):i.output_preprocessed===!0&&(P=null!=(S=this.preprocessors[C])?S.call(this.preprocessors,P,u,this.locale):void 0,L?u.val(P):u.text(P),null!=n&&(n.value=P))):i.valid!==!1&&(i.valid=!1,this._set_element_data(u,i)),e.apply_error_classes===!0&&null==i.error_targets&&(this._cache_attribute(u,i,"error_targets",function(){return this._get_error_targets(u,C,h)}),this._set_element_data(u,i)),N=y}else null==i.error_targets&&(i=this._cache_attribute(u,i,"error_targets",function(){return this._get_error_targets(u,C,h)}),this._set_element_data(u,i)),this._apply_error_classes(u,i.error_targets,!0),this._apply_dependency_error_classes(u,i.depends_on,!0);return e.focus_invalid===!0&&null!=p&&p.focus(),f=this._group_errors(c,e),this.form_modifier.modify(f,e),f},_.prototype.get_progress=function(e){var t,r,n,i,s,a,o,l,_,u,c,d,p,f,h,g,m,v,y,E;for(null==e&&(e={as_percentage:!1,recache:!1}),null!=this.fields&&e.recache!==!0||this.cache(),a=this.fields.all,y=this.fields.required,_=("function"==typeof this.group?this.group(a):void 0)||this._group(a),E=_.length,r=0,s=this.validate({apply_error_classes:!1,all:!0}),u=c=0,d=_.length;d>c;u=++c){for(l=_[u],t=!0,g=0,p=l.length;p>g;g++)if(n=l[g],n=$(n),y.index(n)>=0){t=!1;break}for(o=!1,m=0,f=l.length;f>m;m++){for(n=l[m],n=$(n),v=0,h=s.length;h>v;v++)if(i=s[v],i.element.is(n)){o=!0;break}if(o)break}o||r++}return e.as_percentage?r/E:{count:r,total:E}},_}()}).call(this);