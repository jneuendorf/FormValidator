!function(e){var t,r,n,i,a,s,o,l,_,u,c,f,d,p,h,g,m,v,x,y,E,N,b,O,A,S,D,T,w,R,k,C,I,L,P,U,F,q,M,V,j=[].indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(t in this&&this[t]===e)return t;return-1},Y=function(e,t){function r(){this.constructor=e}for(var n in t)Z.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},Z={}.hasOwnProperty,G=[].slice;null==Array.prototype.unique&&(Array.prototype.unique=function(){var e,t,r,n;for(n=[],t=0,r=this.length;r>t;t++)e=this[t],j.call(n,e)<0&&n.push(e);return n}),null==e.fn.attrAll&&(e.fn.attrAll=function(t,r,n){var i;return null==r&&(r=" "),null==n&&(n=!0),i=[],this.each(function(r,n){return i.push(e(n).attr(t)),!0}),n&&(i=i.unique()),i.join(r)}),A=function(e){var t,r;return t=function(e,n){var i,a,s,o,l;for(null==n&&(n=[]),l=[],a=s=0,o=e.length;o>=0?o>s:s>o;a=o>=0?++s:--s)i=e.splice(a,1),0===e.length&&r.push(n.concat(i)),t(e.slice(),n.concat(i)),l.push(e.splice(a,0,i[0]));return l},r=[],t(e),r},S=function(e,t){var r,n,i,a,s,o,l;for(l=[],a=e.length,s=function(){var e,n,i;for(i=[],r=e=0,n=t;n>=0?n>e:e>n;r=n>=0?++e:--e)i.push(r);return i}();;){if(l.push(function(){var t,r,i;for(i=[],t=0,r=s.length;r>t;t++)n=s[t],i.push(e[n]);return i}()),s[0]===a-t)break;for(r=t-1;r>=0&&s[r]+t-r===a;)r--;for(o=s[r],s[r]++,i=2,r++;t>r;)s[r]=o+i,r++,i++}return l},D=function(e,t){var r,n,i,a,s;for(n={},a=0,s=e.length;s>a;a++)r=e[a],null==(i="function"==typeof t?t(r):void 0)&&(i=r),null==n[i]&&(n[i]=[]),n[i].push(r);return n},M=function(e){var t,r,n,i,a,s,o,l;for(e=L(e),t=[],function(){var r,n;n=[];for(r in e)0===e[r].cnt?(delete e[r],n.push(t.push(r))):n.push(void 0);return n}(),l=[],function(){var t,r,n;n=[];for(r in e)n.push(function(){var n;n=[];for(t in e[r].v)null==l[t]&&(l[t]=[]),n.push(l[t].push(r));return n}());return n}(),o=[];t.length>0;)for(r=t.pop(),o.push(r),s=l[r]||[],n=0,i=s.length;i>n;n++)a=s[n],q(e[a],r),0===e[a].cnt&&(t.push(a),delete e[a]);for(r in e)throw new Error("FormValidator::validate: Detected cyclical dependencies. Adjust your dependency definitions");return o},L=function(e){var t,r,n,i,a,s,o,l,_;l={},i=U();for(a in e)for(_=e[a],l[a]=U(),r=_,s=0,o=r.length;o>s;s++)t=r[s],""!==t&&(t!==a&&F(l[a],t),F(i,t));for(n in i.v)n in l||(l[n]=U());return l},U=function(){return{cnt:0,v:{}}},F=function(e,t){return e.v[t]||(e.cnt+=1,e.v[t]=!0),e},q=function(e,t){return e.v[t]&&(e.cnt-=1,delete e.v[t]),e},x={},O=function(e,t,r,n){var i,a,s,o,l,_,u,c,f,d,p,h,g;if(null==r&&(r=""),null==n&&(n=""),e=e.slice(0),e.sort(),i=e.join("_"),null!=x[i])return x[i];for(a=o=d=e.length;o>0;a=o+=-1)for(p=S(e,a),u=0,l=p.length;l>u;u++)for(g=p[u],h=A(g),c=0,_=h.length;_>c;c++)if(f=h[c],s=r+f.join("_")+n,null!=R[t][s])return x[i]=s,s;return null},o={NORMAL:"NORMAL",SIMPLE:"SIMPLE"},o.DEFAULT=o.NORMAL,l={BELOW:"BELOW",NONE:"NONE",POPOVER:"POPOVER",TOOLTIP:"TOOLTIP"},l.DEFAULT=l.NONE,i={DISPLAY:"DISPLAY",ENABLE:"ENABLE",FADE:"FADE",NONE:"NONE",OPACITY:"OPACITY",SHOW:"SHOW",SLIDE:"SLIDE"},i.DEFAULT=i.NONE,a=400,m={DEPENDENCIES:"DEPENDENCIES",VALUE:"VALUE",CONSTRAINTS:"CONSTRAINTS"},v={DEPENDENCIES:"DEPENDENCY",VALUE:"VALUE",CONSTRAINTS:"CONSTRAINT"},t={ENUMERATE:"ENUMERATE",LIST:"LIST",SENTENCE:"SENTENCE"},t.DEFAULT=t.ENUMERATE,s={PHASE_ORDER:[m.DEPENDENCIES,m.VALUE,m.CONSTRAINTS],BUILD_MODE:t.DEFAULT},g=["dependency_change_action","depends_on","id","name","preprocess","required","type"],p=["dependency_mode","error_classes","success_classes","dependency_error_classes","error_targets","group","output_preprocessed","postprocess","constraints","errors","valid_constraints","valid_dependencies","valid_value","value"],n={PREPROCESS:!0,POSTPROCESS:!1,REQUIRED:!0,OUTPUT_PREPROCESSED:!0,DEPENDENCY_MODE:"all",ERROR_TARGETS:"",INCLUDE_MAX:"true",INCLUDE_MIN:"true"},r={max:["include_max"],max_length:["enforce_max_length"],min:["include_min"],min_length:["enforce_min_length"],regex:["regex_flags"]},_={ERROR_MODES:o,ERROR_OUTPUT_MODES:l,DEPENDENCY_CHANGE_ACTIONS:i,VALIDATION_PHASES:m,BUILD_MODES:t,ERROR_MESSAGE_CONFIG:s},V={_number:function(e,t){var r;if(e=e.replace(/\s/g,""),"+"===e[0]&&(e=e.slice(1)),"."===e[0]?e="0"+e:"-"===e[0]&&"."===e[1]&&(e="-0."+e.slice(2)),e.indexOf(".")>=0){for(;"0"===e[e.length-1];)e=e.slice(0,-1);"."===e[e.length-1]&&(e=e.slice(0,-1))}return r=parseFloat(e),isNaN(r)||!isFinite(r)||e!==""+r?{error_message_type:"number",_number:r,_string:e}:{valid:!0,_number:r,_string:e}},_text:function(e,t){return e.length>0},email:function(e,t){var r;return e.indexOf("@")<0?{error_message_type:"email_at"}:(r=e.split("@"),r.length>2?{error_message_type:"email_many_at"}:2===r.length&&""!==r[0]&&""!==r[1]?e.indexOf(".",e.indexOf("@"))<0||"."===e[e.length-1]?{error_message_type:"email_dot"}:!0:{error_message_type:"email"})},integer:function(e,t){var r,n;return n=this._number(e,t),n.valid===!0?n._number===Math.floor(n._number)?!0:{error_message_type:"integer_float"}:(e=n._string,r=Math.floor(n._number),isNaN(r)||!isFinite(r)||e!==""+r?{error_message_type:"integer"}:(n.error_message_type=n.error_message_type.replace("number_","integer_"),n))},number:function(e,t){var r;return r=this._number(e,t),r.valid===!0?!0:r},phone:function(e,t){for(e=e.replace(/[\s+\+\-\/\(\)]/g,"");"0"===e[0];)e=e.slice(1);return e!==""+parseInt(e,10)?{error_message_type:"phone"}:!0},text:function(e,t){return e.length>0},radio:function(t,r){return e("[name='"+r.attr("name")+"']:checked").length>0},checkbox:function(e,t){return t.prop("checked")===!0},select:function(e,t){return this.text(t.val())}},N={blacklist:function(e,t){var r,n,i;for(n=0,i=e.length;i>n;n++)if(r=e[n],t.indexOf(r)>=0)return!1;return!0},max:function(e,t,r){return"false"===(null!=r?r.include_max:void 0)?t>e:t>=e},max_length:function(e,t){return e.length<=t},min:function(e,t,r){return"false"===(null!=r?r.include_min:void 0)?e>t:e>=t},min_length:function(e,t){return e.length>=t},regex:function(e,t,r){return new RegExp(t,r.flags).test(e)},whitelist:function(e,t){var r,n,i;for(n=0,i=t.length;i>n;n++)if(r=t[n],e.indexOf(r)<0)return!1;return!0}},y=[],E={include_max:!0,include_min:!0,enforce_max_length:!0,enforce_min_length:!0},T=function(e,t,r){return null!=t?E[e]instanceof Function?""+E[e](r)==""+t:""+E[e]==""+t:!1},R={de:{and:"und",gt:"größer als",gte:"größer als oder gleich",lt:"kleiner als",lte:"kleiner als oder gleich"},en:{and:"and",gt:"greater than",gte:"greater than or equal to",lt:"less than",lte:"less than or equal to"}},e.extend(R.de,{dependency_general:"Die Abhängigkeiten dieses Felds müssen zuerst korrekt ausgefüllt wurden",dependency_prefix:"Die Felder",dependency_suffix:"müssen noch korrekt ausgefüllt werden",dependency_singular_prefix:"Das Feld",dependency_singular_suffix:"muss noch korrekt ausgefüllt werden",value_email:"'{{value}}' muss die Form 'meine.adresse@anbieter.endung' haben",value_email_at:"'{{value}}' muss ein @-Zeichen enthalten",value_email_many_at:"'{{value}}' darf höchstens ein @-Zeichen enthalten",value_email_dot:"'{{value}}' muss eine korrekte Endung haben (z.B. '.de')",value_integer:"'{{value}}' muss eine Zahl sein",value_integer_float:"'{{value}}' darf keine Kommazahl sein",value_number:"'{{value}}' muss eine Zahl sein",value_phone:"'{{value}}' darf nur aus Zahlen, Leerzeichen und den Zeichen '+-/()' bestehen",value_radio:"Eins der Optionsfelder muss ausgewählt werden",value_checkbox:"Das Kontrollkästchen muss ausgewählt werden",value_select:"Es muss eine andere Option ausgewählt werden",value_text:"Das Textfeld muss ausgefüllt werden",constraint_enumerate_prefix:"'{{value}}'",constraint_list_prefix:"'{{value}}'",constraint_sentence_prefix:"'{{value}}'",constraint_blacklist_prefix:"darf",constraint_blacklist:"keines der Zeichen '{{blacklist}}'",constraint_blacklist_suffix:"enthalten",constraint_whitelist_prefix:"muss",constraint_whitelist:"jedes der Zeichen '{{whitelist}}'",constraint_whitelist_suffix:"enthalten",constraint_max_prefix:"darf",constraint_max:"nicht größer als oder gleich {{max}}",constraint_max_suffix:"sein",constraint_max_include_max_prefix:"darf",constraint_max_include_max:"nicht größer als {{max}}",constraint_max_include_max_suffix:"sein",constraint_max_length_prefix:"darf",constraint_max_length:"nicht länger als {{max_length}} Zeichen",constraint_max_length_suffix:"sein",constraint_max_length_enforce_max_length_prefix:"wurde",constraint_max_length_enforce_max_length:"auf {{max_length}} Zeichen",constraint_max_length_enforce_max_length_suffix:"gekürzt",constraint_min_prefix:"darf",constraint_min:"nicht kleiner als oder gleich {{min}}",constraint_min_suffix:"sein",constraint_min_include_min_prefix:"darf",constraint_min_include_min:"nicht kleiner als {{min}}",constraint_min_include_min_suffix:"sein",constraint_min_length_prefix:"darf",constraint_min_length:"nicht kürzer als {{min_length}} Zeichen",constraint_min_length_suffix:"sein",constraint_min_length_enforce_min_length_prefix:"wurde",constraint_min_length_enforce_min_length:"auf {{min_length}} Zeichen",constraint_min_length_enforce_min_length_suffix:"verlängert",constraint_regex_prefix:"muss",constraint_regex:"dem regulären Ausdruck '{{regex}}'",constraint_regex_suffix:"entsprechen"}),e.extend(R.en,{dependency_general:"This field's dependencies must be correctly filled in first",dependency_prefix:"The fields",dependency_suffix:"must be filled in correctly",dependency_singular_prefix:"The field",dependency_singular_suffix:"must be filled in correctly",value_email:"'{{value}}' address must be of the form 'my.address@provider.ending'",value_email_at:"'{{value}}' address must contain an @ symbol",value_email_many_at:"'{{value}}' address can only have one @ symbol",value_email_dot:"'{{value}}' must have a correct ending (i.e. '.com')",value_integer:"'{{value}}' must be an integer",value_integer_float:"'{{value}}' must not be decimal",value_number:"'{{value}}' must be a number",value_phone:"'{{value}}' can only contain numbers, spaces, and the characters '+-/()'",value_radio:"One of the radio buttons must be selected",value_checkbox:"The checkbox must be selected",value_select:"Another option must be selected",value_text:"Please fill in this text field",constraint_enumerate_prefix:"'{{value}}'",constraint_list_prefix:"'{{value}}'",constraint_sentence_prefix:"'{{value}}'",constraint_blacklist_prefix:"must not",constraint_blacklist:"contain any of the characters '{{blacklist}}'",constraint_blacklist_suffix:"",constraint_whitelist_prefix:"must",constraint_whitelist:"contain all of the characters '{{whitelist}}'",constraint_whitelist_suffix:"",constraint_max_prefix:"must not",constraint_max:"be greater than or equal to {{max}}",constraint_max_suffix:"",constraint_max_include_max_prefix:"must not",constraint_max_include_max:"be greater than {{max}}",constraint_max_include_max_suffix:"",constraint_max_length_prefix:"must not",constraint_max_length:"be longer than {{max_length}} characters",constraint_max_length_suffix:"",constraint_max_length_enforce_max_length_prefix:"was",constraint_max_length_enforce_max_length:"shortened to {{max_length}} characters",constraint_max_length_enforce_max_length_suffix:"",constraint_min_prefix:"must not",constraint_min:"be less than or equal to {{min}}",constraint_min_suffix:"",constraint_min_include_min_prefix:"must not",constraint_min_include_min:"be less than {{min}}",constraint_min_include_min_suffix:"",constraint_min_length_prefix:"must not",constraint_min_length:"be shorter than {{min_length}} characters",constraint_min_length_suffix:"",constraint_min_length_enforce_min_length_prefix:"was",constraint_min_length_enforce_min_length:"extended to {{min_length}} characters",constraint_min_length_enforce_min_length_suffix:"",constraint_regex_prefix:"must",constraint_regex:"match the regular expression '{{regex}}'",constraint_regex_suffix:""}),w={de:{},en:{}},w.de[t.ENUMERATE]=null,w.de[t.SENTENCE]=null,w.de[t.LIST]=null,w.en[t.ENUMERATE]=null,w.en[t.SENTENCE]=null,w.en[t.LIST]=null,C={},I={},c=function(){function e(e,t,r){3===arguments.length?(this.func=r,e[t]=this):this.func=arguments[0]}return e.prototype.make=function(){return this.func.apply(this,arguments)},e}(),d=function(e){function t(e,r){t.__super__.constructor.call(this,I,e,r)}return Y(t,e),t.prototype.create_data=function(e,t,r,n){return this.make(e,t,r,n)},t}(c),f=function(e){function t(e,r){t.__super__.constructor.call(this,C,e,r)}return Y(t,e),t.prototype.build_message=function(e,t,r,n,i){return this.make(e,t,r,n,i)},t}(c),h=function(){function e(){this._dict={},this._order=[]}return e.prototype.put=function(e,t,r){var n;return this._dict[e]=t,null==r?j.call(this._order,e)<0&&this._order.push(e):(n=this._order.indexOf(e),n>=0&&this._order.splice(n,1),this._order.splice(r,0,e)),this},e.prototype.get=function(e){return this._dict[e]},e.prototype.remove=function(e){var t;return delete this._dict[e],this._order=function(){var r,n,i,a;for(i=this._order,a=[],r=0,n=i.length;n>r;r++)t=i[r],t!==e&&a.push(t);return a}.call(this),this},e.prototype.join=function(e){var t;return null==e&&(e=""),function(){var r,n,i,a,s;for(a=this._order,s=[],n=0,i=a.length;i>n;n++)t=a[n],s.push(("function"==typeof(r=this._dict[t]).join?r.join(e):void 0)||this._dict[t]);return s}.call(this).join(e)},e.prototype.each=function(e){var t,r,n,i,a;for(a=this._order,t=n=0,i=a.length;i>n;t=++n)if(r=a[t],e.call(this,r,this._dict[r],t)===!1)return this;return this},e.prototype.to_array=function(){var e;return function(){var t,r,n,i;for(n=this._order,i=[],t=0,r=n.length;r>t;t++)e=n[t],i.push(this._dict[e]);return i}.call(this)},e.prototype.to_object=function(){var e,t,r,n;r={},t=this._dict;for(e in t)n=t[e],r[e]=n;return r},e.prototype.get_object=function(){return this._dict},e.prototype.get_order=function(){return this._order},e}(),P=function(){var t,r,n,i,a,s;if(r=arguments[0],s=2<=arguments.length?G.call(arguments,1):[],s=1===s.length?s[0]:e.extend.apply(e,s),"string"==typeof r){for(t in s)a=s[t],i="{{"+t+"}}",r.indexOf(i)>=0&&(n=new RegExp(i,"g"),r=r.replace(n,a));return r}if(r instanceof Function)return r(s);throw new Error("FormValidator: Error while building an error message. Expected mustache-like string or function but was given:",r,s)},new d(m.DEPENDENCIES,function(e,t,r,n){var i,a,s,o,l,_,u,c;return l=function(){var t,r,n;for(n=[],t=0,r=e.length;r>t;t++)i=e[t],null!=i.name&&n.push(i.name);return n}(),l.length===e.length?(s=R[n],a=v[t].toLowerCase(),1===l.length&&(a+="_singular"),u=a+"_prefix",c=a+"_suffix",_=function(){var e,t,r;for(r=[],e=0,t=l.length;t>e;e++)o=l[e],r.push({message:"'"+o+"'",prefix:s[u],suffix:s[c]});return r}()):(a=v[t].toLowerCase()+"_general",_=[]),{parts:_}}),new d(m.VALUE,function(e,t,r,n){var i,a,s;return i=e[0],a=v[t].toLowerCase()+"_"+(i.error_message_type||i.type),s={message:P(R[n][a],i),prefix:"",suffix:""},{key:a,parts:[s]}}),new d(m.CONSTRAINTS,function(t,r,n,i){var a,s,o,l,_,u,c,f,d,p,h,g,m,x,E,N,b,A,S,D,w,k,C,I,L,U,F,q,M;for(w=[],c=[],q=[],g=0,m=t.length;m>g;g++){for(o=t[g],_=!1,f=A=0,x=y.length;x>A;f=++A)u=y[f],L=o.type,j.call(u,L)>=0&&(_=!0,null!=c[f]?c[f].push(o):c[f]=[o]);_||q.push(o)}for(S=0,E=q.length;E>S;S++)o=q[S],c.push([o]);for(k=v[r].toLowerCase(),p=k+"_",a=R[i][(k+"_"+n+"_prefix").toLowerCase()]||"",s=R[i][(k+"_"+n+"_suffix").toLowerCase()]||"",I=0,N=c.length;N>I;I++)if(t=c[I],null!=t){for(h=[],F=0,b=t.length;b>F;F++)if(o=t[F],h.push(o.type),null!=o.options){U=o.options;for(D in U)M=U[D],T(D,M,i)&&h.push(D)}d=O(h,i,p),null!=d&&w.push({message:P.apply(null,[R[i][d]].concat(G.call(t))),prefix:P(R[i][d+"_prefix"],o)||a,suffix:P(R[i][d+"_suffix"],o)||s})}return d=k+"_"+n.toLowerCase(),C=P(""+R[i][d+"_prefix"],t[0]),l=e.extend.apply(e,[{}].concat(t)),{key:d,parts:w,error_data:l,prefix:C}}),k=new c(function(e,t,r,n,i,a,s,o){var l,_,u,c,f,d,p,g,m,v,x,y;for(null==s&&(s=" "),null==o&&(o=" "),c=e.key,x=e.parts,_=null!=(y=e.error_data)?y:{},i=i||e.prefix||R[n][c+"_prefix"]||"",a=a||e.suffix||R[n][c+"_suffix"]||"",e.prefix=("function"==typeof i?i():void 0)||i,e.suffix=("function"==typeof a?a():void 0)||a,u=f=0,d=x.length;d>f;u=++f)v=x[u],l=new h,v.prefix&&(l.put("prefix",v.prefix),l.put("prefix_delimiter",v.prefix_delimiter||s)),l.put("message",v.message),v.suffix&&(l.put("suffix_delimiter",v.suffix_delimiter||o),l.put("suffix",v.suffix)),x[u]=l;for(m=new h,u=g=0,p=x.length;p>g;u=++g)v=x[u],m.put(u,v);return e.parts=m,e}),new f(t.ENUMERATE,function(e,t,r,n){var i,a,s,o,l,_,u,c,f,d,p,g,m,v,x,y,E,N;e=k.make(e,t,r,n),g=e.parts.to_array(),s=R[n],v=D(g,function(e){return e.get("suffix")||""}),g=[];for(E in v){N=v[E],m=D(N,function(e){return e.get("prefix")||""});for(x in m)for(y=m[x],i=a=0,o=y.length;o>a;i=++a)d=y[i],i>0&&(d.remove("prefix"),d.remove("prefix_delimiter"));for(i=u=0,l=N.length;l>u;i=++u)d=N[i],i<N.length-1&&(d.remove("suffix_delimiter"),d.remove("suffix"));g=g.concat(N)}for(c=new h,i=f=0,_=g.length;_>f;i=++f)p=g[i],i===g.length-1&&i>0&&(p.put("prefix"," "+R[n].and+" "+(p.get("prefix")||""),0),p.put("prefix_delimiter"," ",1)),c.put(i,p);return e.parts=c,((e.prefix||"")+" "+c.join("")+" "+(e.suffix||"")).replace(/\s+/g," ")}),new f(t.SENTENCE,function(e,t,r,n){var i,a,s,o,l;for(e=k.make(e,t,r,n),e.parts.each(function(t,r){return r.put("prefix",(" "+(e.prefix||"")+" "+(r.get("prefix")||"")).trim(),0),r.put("prefix_delimiter"," ",1),r.put("suffix_delimiter",r.get("suffix")?r.get("suffix_delimiter"):"",3),r.put("suffix",(" "+(e.suffix||"")+" "+(r.get("suffix")||"")+".").trim(),4),!0}),o=[],l=e.parts.to_array(),i=0,a=l.length;a>i;i++)s=l[i],o.push(s.join());return o.join(" ").replace(/\s+/g," ").trim()}),new f(t.LIST,function(e,r,n,i){var a,s;return s=C[t.SENTENCE].build_message(e,r,n,i),"."===s[s.length-1]&&(s+=" "),"<ul><li>"+function(){var e,t,r,n;for(r=s.split(". "),n=[],e=0,t=r.length;t>e;e++)a=r[e],a&&n.push(a+".");return n}().join("</li><li>")+"</li></ul>"}),b={},b[i.DISPLAY]=function(e,t){var r;return t?null!=(r=e.data("_fv_orig_display"))&&e.css("display",r):(e.data("_fv_orig_display",e.css("display")),e.css("display","none")),e},b[i.ENABLE]=function(e,t){return e.prop("disabled",!t)},b[i.FADE]=function(e,t){return t?e.fadeIn(a):e.fadeOut(a),e},b[i.OPACITY]=function(e,t){var r;return t?null!=(r=e.data("_fv_orig_opacity"))&&e.animate({opacity:r,DEPENDENCY_CHANGE_ACTION_DURATION:a}):(e.data("_fv_orig_opacity",e.css("opacity")),e.animate({opacity:0,DEPENDENCY_CHANGE_ACTION_DURATION:a})),e},b[i.SHOW]=function(e,t){return t?e.show(a):e.hide(a),e},b[i.SLIDE]=function(e,t){return t?e.slideDown(a):e.slideUp(a),e},u=function(){function t(e,t){this.form_validator=e,null!=l[t.error_output_mode]||t.error_output_mode instanceof Function?this.error_output_mode=t.error_output_mode:this.error_output_mode=l.DEFAULT}return t.prototype._apply_classes=function(e,t,r,n){var i,a,s,o,l;if(null!=t){for(l=this.form_validator._find_targets(t,e),i=a=0,s=l.length;s>a;i=++a)o=l[i],o instanceof jQuery||(o=l.eq(i)),n===!1?o.addClass(r):o.removeClass(r);return l}return[]},t.prototype._set_message_below=function(t,r,n){var i;return null==(i=r.data("_fv_error_container"))&&("radio"===n.type&&(r=e("input[name='"+r.attr("name")+"']").last()),0===(i=r.next(".fv-error-message")).length&&(i=e('<div class="fv-error-message" />'),r.after(i)),r.data("_fv_error_container",i)),i.html(t),this},t.prototype._set_message_tooltip=function(t,r,n){return null==r.data("_fv_tooltip")&&r.tooltip({html:!0,placement:r.attr("data-placement")||"top",title:function(){return e(this).data("_fv_tooltip")}}),r.data("_fv_tooltip",t).tooltip("hide"),this},t.prototype._set_message_popover=function(t,r,n){return"checkbox"===n.type||"radio"===n.type||"select"===n.type?(r.attr("title",t),this):(null==r.data("_fv_popover")&&r.popover({html:!0,placement:r.attr("data-placement")||"right",content:function(){return e(this).data("_fv_popover")},trigger:"manual"}).focus(function(){return r.popover("show"),!1}).blur(function(){return r.popover("hide"),!0}).click(function(){return document.activeElement===this&&r.popover("toggle"),!0}),r.data("_fv_popover",t).popover("hide"),this)},t.prototype._process_error_message=function(e,t,r){var n,i;return this.error_output_mode===l.NONE?this:(this.error_output_mode instanceof Function?(i=this.error_output_mode(t,r,e),i.html(e)):(n=this.error_output_mode.toLowerCase(),this["_set_message_"+n](e,t,r)),this)},t.prototype._process_max_length=function(e,t,r){var n,i;return"true"===e.options.enforce_max_length?(n=parseInt(e.value,10),i=r.value.slice(0,n),r.value=i,t.val(i),!0):!1},t.prototype._process_min_length=function(e,t,r){var n,i,a;return"true"===e.options.enforce_min_length?(i=parseInt(e.value,10),a=r.value+function(){var e,t,a;for(a=[],n=e=0,t=r.value.length-i;t>=0?t>e:e>t;n=t>=0?++e:--e)a.push(".");return a}().join(""),r.value=a,t.val(a),!0):!1},t.prototype._process_constraint=function(e,t,r){var n;return("function"==typeof this[n="_process_"+e.name]?this[n](e,t,r):void 0)||!1},t.prototype._on_dependency_change=function(e,t,r,n){var i,a;return i=FormValidator,r.depends_on.length>0&&null!=r.error_targets&&(this.form_validator.dependency_change_action instanceof Function?this.form_validator.dependency_change_action(t,n):null!=(a=i.dependency_change_actions[e])&&a.call(i.dependency_change_actions,r.error_targets,n)),this},t.prototype.modify=function(e,t){var r,n,i,a,s,o,l,_,u,c,f,d,p,h,g,v,x,y,E,N,b,O,A,S,D;for(c=this.form_validator,_=c.fields.all,l=c.error_output_mode,u=null,d=h=0,O=_.length;O>=0?O>h:h>O;d=O>=0?++h:--h){for(a=_.eq(d),n=c._get_element_data(a),f=null,y=0,g=e.length;g>y;y++)if(s=e[y],s.element.is(a)){f=s;break}if(null==f)p=!0,E="";else{for(p=!1,null==u&&(u=a),A=f.errors,N=0,v=A.length;v>N;N++)if(o=A[N],o.phase===m.DEPENDENCIES)D=!1;else if(o.phase===m.CONSTRAINTS)for(S=n.constraints,b=0,x=S.length;x>b;b++)if(r=S[b],r.name===o.type){i=this._process_constraint(r,a,n),i&&c._set_element_data(a,n);break}E=f.message}n.dependency_changed&&this._on_dependency_change(n.dependency_change_action,a,n,n.valid_dependencies),t.apply_error_classes===!0&&(this._apply_classes(a,n.error_targets,n.error_classes||c.error_classes,p),this._apply_classes(a,n.error_targets,n.success_classes||c.success_classes,!p),this._apply_classes(a,n.depends_on,n.dependency_error_classes||c.dependency_error_classes,n.valid_dependencies)),this._process_error_message(E,a,n)}return t.focus_invalid===!0&&null!=u&&u.focus(),this},t}(),window.FormValidator=function(){function i(r,n,i){var a;null==i&&(i={}),a=this.constructor,this.form=r,this.fields=null,this.form_modifier=n,this.last_validation=null,this.error_classes=i.error_classes||this.form.attr("data-fv-error-classes")||"fv-invalid",this.success_classes=i.success_classes||this.form.attr("data-fv-success-classes")||"fv-valid",this.dependency_error_classes=i.dependency_error_classes||this.form.attr("data-fv-dependency-error-classes")||"fv-invalid-dependency",this.dependency_change_action=i.dependency_change_action||this.form.attr("data-fv-dependency-change-action")||DEPENDENCY_CHANGE_ACTION.DEFAULT,this.validators=e.extend({},a.validators,i.validators),this.validation_options=i.validation_options||null,this.constraint_validators=e.extend({},a.constraint_validators,i.constraint_validators),this.build_mode=i.build_mode||t.DEFAULT,this.error_mode=null!=a.ERROR_MODES[i.error_mode]?i.error_mode:a.ERROR_MODES.DEFAULT,this.locale=i.locale||"en",this.error_target_getter=i.error_target_getter||null,this.field_getter=i.field_getter||null,this.required_field_getter=i.required_field_getter||null,this.create_dependency_error_message=i.create_dependency_error_message||null,this.preprocessors=e.extend(a.default_preprocessors,i.preprocessors||{}),this.postprocessors=i.postprocessors||{},this.group=i.group||null,this.process_errors=i.process_errors||null,this._field_order=null}var a,s;for(s in _)a=_[s],i[s]=a;return i.constraint_validators=N,i.validators=V,i.dependency_change_actions=b,i.locales=R,i.default_preprocessors={number:function(e,t,r){switch(r){case"de":return e.replace(/\,/g,".");default:return e}},integer:function(e,t,r){switch(r){case"de":return e.replace(/\,/g,".");default:return e}}},i.configure=function(e){return e({constraint_validator_groups:y,constraint_validator_options_in_locale_key:E,constraint_validator_options:constraint_validator_options,locale_message_builders:w,message_builders:C,message_data_creators:I}),this},i.get_error_message_type=function(e,t){var r;return t===this.ERROR_MODES.SIMPLE?r=e.split("_")[0]:e},i._build_error_message=function(e,t,r,n){var i;return i=I[e].create_data(t,e,r,n),C[r].build_message(i,e,r,n)},i._get_error_message_for_element=function(e,t,r,n,i){var a,s,o,l,_,u,c;null==i&&(i=" "),s=[],o={};for(u in m)o[u]=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)a=t[e],a.phase===u&&n.push(a);return n}();for(c=this.ERROR_MESSAGE_CONFIG.PHASE_ORDER,l=0,_=c.length;_>l;l++)u=c[l],o[u].length>0&&s.push(this._build_error_message(u,o[u],r,n));return s.join(i)},i["new"]=function(e,t){var r,n;return n=new this(e,null,t),r=new u(n,t),n.form_modifier=r,n},i.new_without_modifier=function(e,t){return new this(e,null,t)},i.prototype._get_fields=function(t){return("function"==typeof this.field_getter?this.field_getter(t):void 0)||t.find("[data-fv-validate]").filter(function(t,r){return 0===e(r).closest("[data-fv-ignore-children]").length})},i.prototype._get_required=function(e){return("function"==typeof this.required_field_getter?this.required_field_getter(e):void 0)||e.not("[data-fv-optional='true']")},i.prototype._get_attribute_value_for_key=function(e,t){var r,i,a,s,o,l,_,u;return o="data-fv-",_={type:"validate",required:"optional"},i=["preprocess","required"],r=null==_[t]?o+t.replace(/\_/g,"-"):o+_[t],u=e.attr(r),a=null!=u,a?u=u.trim():(l=s=t.toUpperCase(),j.call(Object.keys(n),l)>=0&&(u=n[s])),j.call(i,t)>=0&&(u="true"===u||u===!0),"required"===t&&a&&(u=!u),u},i.prototype._set_element_data=function(t,r){return e.data(t[0],"_fv",r),this},i.prototype._get_element_data=function(t){return e.data(t[0],"_fv")},i.prototype._cache_attribute=function(e,t,r,i){return null==i?i=e.attr("data-fv-"+r.replace(/\_/g,"-")):i instanceof Function&&(i=i.call(this)),null==i&&(i=n[r.toUpperCase()]),t[r]=i,t},i.prototype._get_value_info=function(e,t){var r,n,i,a,s,o;return i=t.type,n=t.preprocess,a=!0,s=e.val(),null==s&&(a=!1,s=e.text()),r=s,o=r!==t.value,t.value=r,null!=this.preprocessors[i]&&n!==!1&&(s=this.preprocessors[i].call(this.preprocessors,s,e,this.locale)),{usedValFunc:a,value:s,original_value:r,value_has_changed:o}},i.prototype._find_targets=function(e,t,r){var n;return null==r&&(r=/\;\s+/g),"string"==typeof e?function(){var i,a,s,o;for(s=e.split(r),o=[],i=0,a=s.length;a>i;i++)n=s[i],o.push(this._find_target(n,t));return o}.call(this):e||[]},i.prototype._find_target=function(t,r){var n;return"self"===t?r:(n=this.form.find("[data-fv-name='"+t+"']"),0===n.length&&(n=r.closest(t)),0===n.length&&(n=this.form.find(t)),0===n.length&&(n=e(t)),n)},i.prototype._get_error_targets=function(e,t){return("function"==typeof this.error_target_getter?this.error_target_getter(e,t):void 0)||e.attr("data-fv-error-targets")||e.closest("[data-fv-error-targets]").attr("data-fv-error-targets")||n.ERROR_TARGETS},i.prototype._group=function(e){var t,r,n,i,a,o,l,_;for(r={},o=l=0,_=e.length;_>=0?_>l:l>_;o=_>=0?++l:--l)n=e.eq(o),t=this._get_element_data(n),null==t.group&&(t.group=n.attr("data-fv-group")||t.name,this._set_element_data(n,t)),a=t.group,null==r[a]?r[a]=[n]:r[a].push(n);return function(){var e;e=[];for(s in r)i=r[s],e.push(i);return e}()},i.prototype._group_errors=function(e,t){var r,n,i,a,s,o,l,_,u,c,f,d,p,h;for(r=this.constructor,h=[],s=this.fields.all,l=_=0,d=s.length;d>=0?d>_:_>d;l=d>=0?++_:--_){n=s.eq(l),i=function(){var t,r,i;for(i=[],r=0,t=e.length;t>r;r++)a=e[r],a.element.is(n)&&i.push(a);return i}(),o=D(i,function(e){return e.phase});for(c in m)if((null!=(p=f=o[c])?p.length:void 0)>0){i=f;break}i.length>0&&(u=t.messages===!0?r._get_error_message_for_element(n,i,this.build_mode,this.locale):"",h.push({element:n,errors:i,message:u}))}return h},i.prototype._validate_value=function(e,t,r){var n,i,a,s;if(n=t.type,s=r.value,a=this.validators[n],null==a)throw new Error("FormValidator::_validate_value: No validator found for type '"+n+"'. Make sure the type is correct or define a validator!");return i=a.call(this.validators,s,e),i===!1?i={error_message_type:n}:"string"==typeof i&&(i={error_message_type:i}),i!==!0&&(i.error_message_type=this.constructor.get_error_message_type(i.error_message_type,this.error_mode)),i},i.prototype._validate_dependencies=function(e,t,r){var n,i,a,s,o,l,_,u,c;for(o=[],s=t.depends_on,l=_=0,u=s.length;u>_;l=++_)i=s[l],n=this._get_element_data(i),a=this._validate_element(i,n,this._get_value_info(i,n),r),a.length>0&&o.push({dependency_element:i,element:e,index:l,type:n.type,name:n.name});return null==t.dependency_mode&&(this._cache_attribute(e,t,"dependency_mode"),this._set_element_data(e,t)),c="any"===t.dependency_mode?o.length<s.length:0===o.length,{dependency_errors:o,dependency_elements:s,valid_dependencies:c,dependency_mode:t.dependency_mode}},i.prototype._validate_constraints=function(e,t,i){var a,s,o,l,_,u,c,f,d,p,h,g,m,v,x,y;if(y={},null!=t.constraints)c=t.constraints;else{a=this.constructor,c=[],v=this.constraint_validators;for(o in v)if(l=v[o],null!=(u=this._get_attribute_value_for_key(e,o))){if(null!=(_=r[o]))for(m={},f=0,d=_.length;d>f;f++)g=_[f],m[g]=this._get_attribute_value_for_key(e,g)||n[g.toUpperCase()];else m=null;c.push({name:o,options:m,validator:l,value:u})}t.constraints=c,this._set_element_data(e,t)}for(h=0,p=c.length;p>h;h++)s=c[h],s.validator.call(this.constraint_validators,i,s.value,s.options)===!0?y[s.name]=!0:(x={},x.options=s.options,x[s.name]=s.value,y[s.name]=x);return y},i.prototype._validate_element=function(t,r,n,i){var a,s,o,l,_,u,c,f,d,p,h,g,v,x,y,E,N,b,O,A,S,D,T,w,R,k;if(r.last_validation===this.last_validation)return r.errors[m.DEPENDENCIES].concat(r.errors[m.VALUE],r.errors[m.CONSTRAINTS]);if(c=[],y=!0,f=r.required,S=r.type,R=n.value,v=n.original_value,k=n.value_has_changed,D=n.usedValFunc,x=m.DEPENDENCIES,E=this._validate_dependencies(t,r,i),l=E.dependency_errors,s=E.dependency_elements,_=E.dependency_mode,T=E.valid_dependencies,T)r.errors[x]=[];else{for(y=!1,d=0,p=l.length;p>d;d++)o=l[d],e.extend(o,{element:t,required:f,type:"dependency",phase:x,mode:_});r.errors[x]=l}if(r.dependency_changed=T!==r.valid_dependencies,r.valid_dependencies=T,r.dependency_changed&&null==r.error_targets&&this._cache_attribute(t,r,"error_targets",function(){return this._get_error_targets(t,S)}),c=c.concat(r.errors[x]),x=m.VALUE,!y&&i.stop_on_error||(k||r.dependency_changed&&r.valid_dependencies&&0===r.errors[x].length?(w=this._validate_value(t,r,n),w!==!0?(y=!1,r.valid_value=!1,r.errors[x]=[{element:t,error_message_type:w.error_message_type,phase:x,required:f,type:S,value:R}]):(r.valid_value=!0,r.errors[x]=[])):k||!y&&i.stop_on_error||r.valid_value!==!0&&(y=!1)),c=c.concat(r.errors[x]),x=m.CONSTRAINTS,k){if(y||!i.stop_on_error){r.valid_constraints=!0,A=[],N=this._validate_constraints(t,r,R);for(a in N)O=N[a],O!==!0&&(r.valid_constraints=!1,y=!1,A.push(e.extend(O,{element:t,required:f,type:a,phase:x,value:R})));r.errors[x]=A}}else!y&&i.stop_on_error||r.valid_constraints!==!0&&(y=!1);if(c=c.concat(r.errors[x]),r.valid_dependencies&&r.valid_value&&r.valid_constraints){if(r.valid===!0&&null!=r.postprocess&&null!=r.output_preprocessed||(r.valid=!0,this._cache_attribute(t,r,"postprocess"),this._cache_attribute(t,r,"output_preprocessed")),r.postprocess===!0||r.output_preprocessed===!0)for(r.postprocess===!0?R=null!=(b=this.postprocessors[S])?b.call(this.postprocessors,R,t,this.locale):void 0:r.output_preprocessed===!0&&null!=this.preprocessors[S]&&(R=this.preprocessors[S].call(this.preprocessors,R,t,this.locale)),D?t.val(R):t.text(R),g=0,h=c.length;h>g;g++)u=c[g],u.value=R}else r.valid!==!1&&(r.valid=!1);return i.apply_error_classes===!0&&null==r.error_targets&&this._cache_attribute(t,r,"error_targets",function(){return this._get_error_targets(t,S)}),r.last_validation=this.last_validation,
this._set_element_data(t,r),c},i.prototype.cache=function(){var e,t,r,n,i,a,s,o,l,_,u,c,f,d,h;for(i=this._get_fields(this.form),r={},o={},a=_=0,h=i.length;h>=0?h>_:_>h;a=h>=0?++_:--_){for(n=i.eq(a),e={},f=0,u=g.length;u>f;f++)l=g[f],e[l]=this._get_attribute_value_for_key(n,l);for(e.depends_on=this._find_targets(e.depends_on,n,/^\s*\;\s*$/g),e.id=a,null==e.dependency_change_action&&(e.dependency_change_action=this.dependency_change_action),d=0,c=p.length;c>d;d++)l=p[d],e[l]=null;e.errors={},e.errors[m.DEPENDENCIES]=[],e.errors[m.VALUE]=[],e.errors[m.CONSTRAINTS]=[],this._set_element_data(n,e),o[e.id]=n,r[e.id]=function(){var r,n,i,a;for(i=e.depends_on,a=[],n=0,r=i.length;r>n;n++)t=i[n],a.push(this._get_element_data(t).id);return a}.call(this)}return this.fields={all:i,required:this._get_required(i),ordered:function(){var e,t,n,i;for(n=M(r),i=[],t=0,e=n.length;e>t;t++)s=n[t],i.push(o[s]);return i}()},this},i.prototype.validate=function(t){var r,n,i,a,o,l,_,u,c,f,d,p,h,g,m,v,x,y;for(null==t&&(t={}),i={all:!1,apply_error_classes:!0,focus_invalid:!0,messages:!0,stop_on_error:!0,recache:!1},t=e.extend(i,this.validation_options,t),null!=this.fields&&t.recache!==!0||this.cache(),this.last_validation=Date.now(),r=this.constructor,l=[],m=!1,_=this.fields.ordered,f=0,d=_.length;d>f;f++)a=_[f],n=this._get_element_data(a),c=n.required,g=n.type,s=n.name,y=this._get_value_info(a,n),v=y.value,p=y.original_value,x=y.value_has_changed,m=y.usedValFunc,t.all!==!1||c||0!==v.length&&"radio"!==g&&"checkbox"!==g?(o=this._validate_element(a,n,y,t),o.length>0&&(l=l.concat(o))):null==n.error_targets&&(n=this._cache_attribute(a,n,"error_targets",function(){return this._get_error_targets(a,g)}),this._set_element_data(a,n));return u=this._group_errors(l,t),"function"==typeof this.process_errors&&this.process_errors(u),null!=(h=this.form_modifier)&&h.modify(u,t),u},i.prototype.get_progress=function(t){var r,n,i,a,s,o,l,_,u,c,f,d,p,h,g,m,v,x,y,E;for(null==t&&(t={as_percentage:!1,recache:!1}),null!=this.fields&&t.recache!==!0||this.cache(),o=this.fields.all,y=this.fields.required,u=("function"==typeof this.group?this.group(o):void 0)||this._group(o),E=u.length,n=0,s=this.validate({apply_error_classes:!1,all:!0}),c=f=0,d=u.length;d>f;c=++f){for(_=u[c],r=!0,m=0,p=_.length;p>m;m++)if(i=_[m],i=e(i),y.index(i)>=0){r=!1;break}for(l=!1,v=0,h=_.length;h>v;v++){for(i=_[v],i=e(i),x=0,g=s.length;g>x;x++)if(a=s[x],a.element.is(i)){l=!0;break}if(l)break}l||n++}return t.as_percentage?n/E:{count:n,total:E}},i}(),e(document).ready(function(){return e(document).on("click","[data-fv-start]",function(){var t,r,n,i,a,s,o;if(t=e(this),null==(r=t.data("_form_validator_container"))&&(r=t.closest(t.attr("data-fv-start")),0===r.length&&(r=e(t.attr("data-fv-start"))),t.data("_form_validator_container",r)),null==(s=r.data("_form_validator"))){if(o=t.attr("data-fv-start-options"),null!=o)try{o=JSON.parse(o)}catch(i){n=i;try{o=window[o]()}catch(a){n=a,o={}}}s=FormValidator["new"](r,o),r.data("_form_validator",s)}return s.validate(),!1}),e(document).on("change keyup","[data-fv-real-time] [data-fv-validate]",function(t){var r,n,i,a,s,o;return r=e(this),o=(null!=(s=r.attr("type"))?s.toLowerCase():void 0)||"",a=1===r.filter("textarea").length||r.filter("input").length&&("button"===o||"checkbox"===o||"color"===o||"file"===o||"image"===o||"radio"===o||"range"===o||"submit"===o),"change"===t.type&&a?!0:(n=r.closest("[data-fv-real-time]"),1===n.length&&(null==(i=n.data("_form_validator"))&&(i=FormValidator["new"](n),n.data("_form_validator",i)),i.validate({focus_invalid:!1})),!1)}),!0})}(jQuery);